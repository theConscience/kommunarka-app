(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{266:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuNjcgMC45Mjk5OTNMMC4yNSA3LjE0OTk5VjguNTc5OTlMNi42NyAxNC44TDguMjQgMTMuMTRMNC4wOSA5LjA4OTk5SDI0LjM5VjYuNjM5OTlINC4wOUw4LjI0IDIuNTk5OTlMNi42NyAwLjkyOTk5M1oiIGZpbGw9IiNmZmZmZmYiLz4KPC9zdmc+Cg=="},268:function(e,t,r){var content=r(275);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(29).default)("c5782278",content,!0,{sourceMap:!1})},274:function(e,t,r){"use strict";r(268)},275:function(e,t,r){var n=r(28),o=r(58),c=r(59),l=r(60),h=r(266),f=r(276),d=r(277),m=r(278);t=n(!1);var _=o(c),y=o(l),k=o(h),v=o(f),M=o(d),w=o(m);t.push([e.i,'@font-face{font-family:"MonoCondensedC";font-style:normal;font-weight:400;font-display:swap;src:url('+_+') format("woff")}@font-face{font-family:"GaramondNarrowC";font-style:normal;font-weight:400;font-display:swap;src:url('+y+') format("woff")}.page__link,.page__title{position:relative;display:inline-block;font-family:"MonoCondensedC","Andale Mono",AndaleMono,"Lucida Console","Lucida Sans Typewriter",monospace;font-size:2.25rem;margin:0 0 2.5vh;text-transform:uppercase;text-decoration:none;color:#fff}.page__link:focus,.page__link:hover,.page__title:focus,.page__title:hover{text-decoration:none}.page__link:after,.page__title:after{content:"";position:absolute;left:0;bottom:.3125vh;width:100%;height:1px;background-color:#fff}@media screen and (min-width:600px){.page__link:after,.page__title:after{height:2px}}.page__link{margin-bottom:8.75vh}.page__link--back{margin-left:3.33333333333vw}.page__link--back:before{content:"";position:absolute;width:2.22222222222vw;height:1.25vh;left:-3.33333333333vw;top:41%;transform:translateY(-50%);background-image:url('+k+');background-size:contain;background-position:50%;background-repeat:no-repeat}.search{background-color:#000}.search__form{margin-bottom:3.75vh;position:relative}.search-form__search{position:relative;margin-bottom:2.5vh}.search-form__search--tip:after{content:"Искать";font-family:"MonoCondensedC","Andale Mono",AndaleMono,"Lucida Console","Lucida Sans Typewriter",monospace;font-size:1.875rem;line-height:1;position:absolute;right:1.851851111109259vw;top:0;bottom:0;width:auto;height:1.875vh;margin:auto;text-transform:uppercase;text-decoration:none;color:#fff;opacity:.5}@media screen and (min-width:500px){.search-form__search--tip:after{font-size:2.25rem}}.search-form__query{font-size:1.75rem;width:100%;height:3.75vh;min-height:36px;padding-left:1.851851111109259vw;border:1px solid #fff;background-color:transparent;color:#fff}@media screen and (min-width:600px){.search-form__query{border:2px solid #fff}}.search-form__query:focus,.search-form__query:hover{outline:none}.search-form__remove-last{position:absolute;top:0;right:0;width:6.66666666666vw;height:3.75vh;min-height:36px;background-color:transparent;background-image:url('+v+');background-repeat:no-repeat;background-size:contain;background-position:50%;text-indent:-9999px;border:none;opacity:.3;outline:none;cursor:pointer;transition:opacity .3s ease-in}.search-form__remove-last--enabled{opacity:1}.search-form__keyboard{list-style:none;display:flex;flex-flow:row nowrap;justify-content:space-between;padding:0;margin:0}.search-form__key{display:inline-block}.search-form__key-link{position:relative;display:block;font-size:2rem;color:#fff;text-decoration:none;text-transform:uppercase;cursor:pointer}.search-form__key-link:focus,.search-form__key-link:hover{cursor:pointer}.search-form__key-link:focus:before,.search-form__key-link:hover:before{content:"";position:absolute;left:0;bottom:.3125vh;height:1px;width:100%;background-color:#fff}@media screen and (min-width:600px){.search-form__key-link:focus:before,.search-form__key-link:hover:before{height:2px}}.search-form__key-link--space{width:3.33333333333vw;height:1.875vh;outline:none}.search-form__key-link--space:before{content:"";position:absolute;top:0;left:0;width:3.33333333333vw;height:1.875vh;background-image:url('+M+');background-size:contain;background-position:50%;background-repeat:no-repeat}.search-form__key-link--space:focus:before,.search-form__key-link--space:hover:before{bottom:auto;width:3.33333333333vw;height:1.875vh;background-color:transparent}.search-form__key-link--active,.search-form__key-link--active:focus,.search-form__key-link--active:hover{cursor:default}.search-form__key-link--active:before{content:"";position:absolute;left:0;bottom:.3125vh;height:1px;width:100%;background-color:#fff}@media screen and (min-width:600px){.search-form__key-link--active:before{height:2px}}.search-form__key-link--disabled{opacity:.5;cursor:default}.search-form__clear{position:absolute;right:0;bottom:-7.5vh;width:6.66666666666vw;height:3.75vh;background-image:url('+w+');background-repeat:no-repeat;background-position:50%;background-size:contain;background-color:transparent;border-width:0;text-indent:-9999px;cursor:pointer;outline:none;opacity:.75;transition:opacity .3s ease-in}.search-form__clear:focus,.search-form__clear:hover{opacity:1}.search__results{margin:0 0 1.25vh}.results-list{font-family:"GaramondNarrowC",Garamond,Baskerville,"Baskerville Old Face",serif;overflow:hidden;list-style:none;display:flex;flex-flow:column wrap;height:61.25vh;min-width:100%;padding:0}.results-list__item{width:50%}.results-list__link{font-size:1.625rem;line-height:1.385;display:block;color:#fff;text-decoration:none}.results-list__link:focus,.results-list__link:hover{text-decoration:underline}.pagination{justify-content:flex-start;align-items:center}.pagination,.pagination__pages{display:flex;flex-flow:row nowrap}.pagination__pages{font-family:"MonoCondensedC","Andale Mono",AndaleMono,"Lucida Console","Lucida Sans Typewriter",monospace;font-size:2rem;line-height:1.2;list-style:none;padding:0;margin:0}.pagination__page-link{position:relative;display:block;font-size:2rem;padding-left:.555555555555vw;padding-right:.555555555555vw;color:#fff;text-decoration:none;text-transform:uppercase;cursor:pointer}.pagination__page-link:focus,.pagination__page-link:hover{cursor:pointer}.pagination__page-link:focus:before,.pagination__page-link:hover:before{content:"";position:absolute;left:0;right:0;bottom:.3125vh;height:1px;width:60%;margin:0 auto;background-color:#fff}@media screen and (min-width:600px){.pagination__page-link:focus:before,.pagination__page-link:hover:before{height:2px}}.pagination__page-link--active,.pagination__page-link--active:focus,.pagination__page-link--active:hover{cursor:default}.pagination__page-link--active:before{content:"";position:absolute;left:0;right:0;bottom:.3125vh;height:1px;width:60%;margin:0 auto;background-color:#fff}@media screen and (min-width:600px){.pagination__page-link--active:before{height:2px}}.pagination__btn{display:inline-block;width:25px;height:15px;margin-bottom:4px;border-width:0;color:#fff;background-color:transparent;background-image:url('+k+");background-repeat:no-repeat;background-position:50%;background-size:contain;outline:none;text-indent:-9999px;cursor:pointer}.pagination__btn--prev{margin-right:1.11111111111vw}.pagination__btn--next{margin-left:1.11111111111vw;transform:rotate(180deg)}.pagination__btn--disabled{opacity:.5;cursor:default}",""]),e.exports=t},276:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJpLXJlbW92ZS1zdmciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDg2LjY0IDgxLjczIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmZmZmZmZ9PC9zdHlsZT48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTUuNTEgNDIuMDVMMzYuMDUgMjEuNUg2Ni4xdi0xLjc0SDM1LjMzTDEzLjA1IDQyLjA1bDIyLjI4IDIyLjI4SDY2LjF2LTEuNzRIMzYuMDV6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTY2LjUgMzAuMDNsLTEuMjMtMS4yMy0xMi4wMSAxMi4wMkw0MS4yNSAyOC44bC0xLjIzIDEuMjMgMTIuMDEgMTIuMDItMTIuMDEgMTIuMDEgMS4yMyAxLjIzIDEyLjAxLTEyLjAyIDEyLjAxIDEyLjAyIDEuMjMtMS4yMy0xMi4wMS0xMi4wMXoiLz48L3N2Zz4K"},277:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzEiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDMxIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0zMC41MSA4Ljg5SDAuMTE5OTk1VjAuODM5OTk2SDIuMTJWNi44OUgyOC41MVYwLjgzOTk5NkgzMC41MVY4Ljg5WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg=="},278:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzQiIGhlaWdodD0iNzQiIHZpZXdCb3g9IjAgMCA3NCA3NCIgZmlsbD0iI2ZmZmZmZiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTczLjkzIDEuNDhMNzIuNyAwLjI1TDM3LjMyIDM1LjY0TDEuOTMgMC4yNUwwLjY5OTk5NyAxLjQ4TDM2LjA5IDM2Ljg3TDAuNjk5OTk3IDcyLjI1TDEuOTMgNzMuNDhMMzcuMzIgMzguMDlMNzIuNyA3My40OEw3My45MyA3Mi4yNUwzOC41NSAzNi44N0w3My45MyAxLjQ4WiIgZmlsbD0iI2ZmZmZmZiIvPgo8L3N2Zz4K"},299:function(e,t,r){"use strict";r.r(t);r(24),r(73),r(39),r(25),r(61),r(42),r(17),r(62),r(63),r(49),r(8),r(40),r(92),r(190),r(30),r(44),r(50);var n=r(23),o=(r(51),r(6)),c=r(36);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var filter,r,n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("fetch called with evt:"),filter=e.activeFilterKey,e.searchActive){t.next=22;break}if(console.log("Search not active: Get data & filter by slug"),console.log("Filter by:",filter),filter){t.next=7;break}return t.abrupt("return");case 7:if(e.victims[filter]||e.setVictimsGroup([filter,[]]),r=e.victims[filter],console.log("victims in group '".concat(filter,"' are: ").concat(r)),r.length){t.next=19;break}return console.log("Make new request for data..."),t.next=14,e.$content("victims").where({slug:filter}).fetch();case 14:n=t.sent,e.setVictimsGroup([filter,n]),console.log("victims for group '".concat(filter,"' are loaded:"),e.victims[filter]),t.next=20;break;case 19:console.log("Victims for this group already loaded!");case 20:t.next=40;break;case 22:if(console.log("Search active: Get data by search string"),console.log("Search by:",e.searchQuery),e.searchQuery.length){t.next=26;break}return t.abrupt("return");case 26:if(o=e.searchQuery[0].toLowerCase(),e.victims[o]||e.setVictimsGroup([o,[]]),c=e.victims[o],console.log("victims in group '".concat(o,"' are: ").concat(c)),c.length){t.next=39;break}return console.log("Make new request for data..."),t.next=34,e.$content("victims").where({slug:o}).search("name",e.searchQuery).fetch();case 34:l=t.sent,e.setVictimsGroup([o,l]),console.log("victims for group '".concat(o,"' are loaded:"),e.victims[o]),t.next=40;break;case 39:console.log("Victims for this group already loaded!");case 40:case"end":return t.stop()}}),t)})))()},data:function(){return{isClient:!0,updateTimerCount:0,updateTimerCountMax:20,keys:["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"],victimsListHeight:1164,victimItemHeight:36,columnsOnPage:2,victimsPerPage:64,currentPage:1}},computed:h(h(h({},Object(c.c)("search",["searchActive","searchQuery","filterKeyId"])),Object(c.c)("victims",["victims"])),{},{activeFilterKey:function(){return this.keys[this.filterKeyId]},selectedGroupVictims:function(){return this.victims[this.activeFilterKey]||[]},selectedGroupVictimsCount:function(){return this.selectedGroupVictims.length},selectedGroupVictimsFiltered:function(){var e=this;return this.selectedGroupVictims?this.selectedGroupVictims.filter((function(t){return t.name.includes(e.searchQuery)})):[]},pagesCountForGroup:function(){return Math.ceil(this.selectedGroupVictimsCount/this.victimsPerPage)},pagesCountForFiltered:function(){return Math.ceil(this.selectedGroupVictimsFiltered/this.victimsPerPage)},pagesCount:function(){return this.searchQuery?this.pagesCountForFiltered:this.pagesCountForGroup},selectedGroupVictimsForPage:function(){return this.selectedGroupVictims.slice(this.victimsPerPage*(this.currentPage-1),this.victimsPerPage*this.currentPage)},selectedGroupVictimsForPageFiltered:function(){return this.selectedGroupVictimsFiltered.slice(this.victimsPerPage*(this.currentPage-1),this.victimsPerPage*this.currentPage)}}),watch:{search_query:function(e,t){console.log("search query changed!"),this.$fetch()},pagesCount:function(e,t){console.log("pages count changed!"),this.currentPage=1}},mounted:function(){var e=this;this.$nextTick((function(){e.$nuxt.$loading.start(),setTimeout((function(){return e.$nuxt.$loading.finish()}),500)})),this.isClient?(console.warn("This is client, updating victims count"),this.updateVictimsPerPage()):console.warn("This is server! no getComputedProperty!")},methods:h(h(h({},Object(c.b)("search",["enableSearch","disableSearch","setSearchQuery","resetSearchQuery","setFilterKeyId","resetFilterKeyId"])),Object(c.b)("victims",["setVictimsGroup"])),{},{onInputUpdate:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.setSearchQuery(e.target.value);case 2:t.$fetch();case 3:case"end":return r.stop()}}),r)})))()},startSearch:function(){console.log("enable search!"),this.enableSearch()},stopSearch:function(){console.log("disable search!!"),this.resetSearchQuery(),this.disableSearch()},updateSearchQuery:function(e){if(console.log("update search query with key:",e),e){var t=this.searchQuery.slice(-1);t&&" "!==t&&"-"!==t?this.setSearchQuery(this.searchQuery+e):this.setSearchQuery(this.searchQuery+e.toUpperCase())}else this.setSearchQuery(this.searchQuery.slice(0,-1))},removeLastFromQuery:function(){console.log("remove last from query"),this.updateSearchQuery(null)},useFilter:function(e){console.log("use filter:",e),this.setFilterKeyId(e),this.$fetch(),this.$fetch()},updateVictimsPerPage:function(e){var t=this,r=this.$refs["results-list"],n=r.firstElementChild;r&&n?(clearTimeout(e),this.victimsListHeight=Math.floor(parseFloat(getComputedStyle(r).height,10)),this.victimItemHeight=Math.floor(parseFloat(getComputedStyle(n).height,10)),this.victimsPerPage=this.victimsListHeight/this.victimItemHeight*this.columnsOnPage):(console.log("No elements, checking after 300ms..."),this.updateTimerCount===this.updateTimerCountMax?(console.warn("Timer reached maximum, stopping timer"),clearTimeout(e)):e=setTimeout((function(){t.updateTimerCount++,t.updateVictimsPerPage(e)}),300))}}),head:function(){return{title:"коммунарка, поиск",meta:[{hid:"description",name:"description",content:"Поиск репрессированных в коммунарке"}]}}},d=(r(274),r(22)),component=Object(d.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"page page--search search"},[r("h1",{staticClass:"page__title"},[e._v("Поиск")]),e._v(" "),r("form",{staticClass:"search__form search-form",class:{"search-form--active":e.searchActive},attrs:{action:"",method:"get"}},[r("div",{staticClass:"search-form__search",class:{"search-form__search--tip":e.searchActive&&!e.searchQuery}},[r("input",{staticClass:"search-form__query",attrs:{type:"search",placeholder:"введите имя / фамилию",name:"search"},domProps:{value:e.searchQuery},on:{focus:e.startSearch,input:e.onInputUpdate}}),e._v(" "),e.searchQuery?r("button",{staticClass:"search-form__remove-last",class:{"search-form__remove-last--enabled":e.searchQuery.length},attrs:{type:"button",title:"Удалить последний символ"},on:{click:function(t){t.preventDefault(),e.searchActive&&e.removeLastFromQuery(null)},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault(),e.searchActive&&e.removeLastFromQuery(null)}}},[e._v("\n        Удалить\n      ")]):e._e()]),e._v(" "),r("ul",{staticClass:"search-form__keyboard"},[e._l(e.keys,(function(t,i){return r("li",{key:t,staticClass:"search-form__key"},[r("a",{staticClass:"search-form__key-link",class:{"search-form__key-link--active":e.filterKeyId===i},on:{click:function(r){r.preventDefault(),e.searchActive?e.updateSearchQuery(t):e.useFilter(i)},keyup:function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")&&e._k(r.keyCode,"space",32,r.key,[" ","Spacebar"]))return null;r.preventDefault(),e.searchActive?e.updateSearchQuery(t):e.useFilter(i)}}},[e._v("\n          "+e._s(t)+"\n        ")])])})),e._v(" "),r("li",{staticClass:"search-form__key"},[r("a",{staticClass:"search-form__key-link search-form__key-link--space",class:{"search-form__key-link--disabled":!e.searchQuery||!e.searchQuery.length},attrs:{href:""},on:{click:function(t){t.preventDefault(),e.searchActive&&e.updateSearchQuery(" ")},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault(),e.searchActive&&e.updateSearchQuery(" ")}}})])],2),e._v(" "),e.searchActive?r("button",{staticClass:"search-form__clear",attrs:{type:"button",title:"Сбросить поиск"},on:{click:e.stopSearch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.stopSearch(t)}}},[e._v("\n      Сброс\n    ")]):e._e()]),e._v(" "),r("ul",{ref:"results-list",staticClass:"search__results results-list",class:["results-list--page-"+e.currentPage]},[e.searchActive?e._l(e.selectedGroupVictimsForPageFiltered,(function(t,n){return r("li",{key:"f_"+t.name+n,staticClass:"results-list__item"},[r("nuxt-link",{staticClass:"results-list__link",attrs:{to:"/person/"+n}},[e._v(e._s(t.name))])],1)})):e._l(e.selectedGroupVictimsForPage,(function(t,n){return r("li",{key:"s_"+t.name+n,staticClass:"results-list__item"},[r("nuxt-link",{staticClass:"results-list__link",attrs:{to:"/person/"+n}},[e._v(e._s(t.name))])],1)}))],2),e._v(" "),r("footer",{staticClass:"page__footer"},[e.pagesCount>1?r("div",{staticClass:"pagination"},[r("button",{staticClass:"pagination__btn pagination__btn--prev",class:{"pagination__btn--disabled":1===e.currentPage},on:{click:function(t){e.currentPage>1&&e.currentPage--},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;e.currentPage>1&&e.currentPage--}}},[e._v("\n        Назад\n      ")]),e._v(" "),r("ul",{staticClass:"pagination__pages"},e._l(e.pagesCount,(function(t){return r("li",{key:t,staticClass:"pagination__page"},[r("a",{staticClass:"pagination__page-link",class:{"pagination__page-link--active":t===e.currentPage},attrs:{href:"?page="+t,title:"На страницу "+t},on:{click:function(r){r.preventDefault(),e.currentPage=t},keyup:function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")&&e._k(r.keyCode,"space",32,r.key,[" ","Spacebar"]))return null;r.preventDefault(),e.currentPage=t}}},[e._v("\n            "+e._s(t)+"\n          ")])])})),0),e._v(" "),r("button",{staticClass:"pagination__btn pagination__btn--next",class:{"pagination__btn--disabled":e.currentPage===e.pagesCount},on:{click:function(t){e.currentPage<e.pagesCount&&e.currentPage++},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;e.currentPage<e.pagesCount&&e.currentPage++}}},[e._v("\n        Вперёд\n      ")])]):e._e()])])}),[],!1,null,null,null);t.default=component.exports}}]);